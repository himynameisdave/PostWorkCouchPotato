!function e(t,i,o){function n(s,r){if(!i[s]){if(!t[s]){var a="function"==typeof require&&require;if(!r&&a)return a(s,!0);if(d)return d(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=i[s]={exports:{}};t[s][0].call(u.exports,function(e){var i=t[s][1][e];return n(i?i:e)},u,u.exports,e,t,i,o)}return i[s].exports}for(var d="function"==typeof require&&require,s=0;s<o.length;s++)n(o[s]);return n}({1:[function(e,t,i){t.exports=function(){var t=e("./modules/watchedVideos.js"),i=e("./modules/freshVideos.js"),o=e("./modules/currentVideo.js"),n=e("./modules/dom.js"),d=function(e){i.fetchVideos(function(o){console.log("JUST GRABBED VIDS!!",o);var n=t.returnSimpleWatchedList(),d=o.filter(function(e){return"moderator"!==e.data.distinguished&&"self.videos"!==e.data.domain&&e.data.media_embed.content?n.indexOf(e.data.name)>-1?!1:e:!1});i.videos=d,e&&e()},t.returnLastFetched())},s=function(){n.els.vidNextBtn.onclick=function(e){t.addNewWatchedVideo(o.video),o.changeCurrentVideo(i.videos[0]),i.videos.shift(),n.displayVideo(o.video),0===i.videos.length&&(console.info("FreshVideos.videos.length is 0,",i),d())},n.els.vidPrevBtn.onclick=function(e){if(t.videos.length<=0)return n.alertUser();i.addNewFreshVideo(o.video);var d=t.videos.length;o.changeCurrentVideo(t.videos[d-1]),t.videos.pop(),n.displayVideo(o.video)},n.els.resetBtn.onclick=function(e){n.doneReset||(n.doneReset=!0,localStorage.clear(),t.videos=[],o.video={},i.lastFetched=!1,d())}};t.init(),o.init(),o.foundLocalCurrentVid&&(console.log("found a CurrentVideo"),n.displayVideo(o.video)),d(function(){o.foundLocalCurrentVid||(o.changeCurrentVideo(i.videos[0]),i.videos.shift(),n.displayVideo(o.video)),s()})}()},{"./modules/currentVideo.js":2,"./modules/dom.js":3,"./modules/freshVideos.js":4,"./modules/watchedVideos.js":5}],2:[function(e,t,i){t.exports={video:{},foundLocalCurrentVid:!1,init:function(){var e=localStorage.getItem("currentVideo");null!==e?(this.foundLocalCurrentVid=!0,e=JSON.parse(e),this.video=e.video):this.foundLocalCurrentVid=!1},changeCurrentVideo:function(e){this.video=e;var t={video:e};localStorage.setItem("currentVideo",JSON.stringify(t))},returnCurrentVideoName:function(){return this.video.data.name},getMediaEmbedData:function(){return this.video.data.media_embed.content.replace("&lt;","<").replace("&lt;","<").replace("&gt;",">").replace("&gt;",">")}}},{}],3:[function(e,t,i){t.exports={els:{alert:document.querySelector(".alert"),resetBtn:document.querySelector(".js-reset-button"),vidTitle:document.querySelector(".video-title"),vidNextBtn:document.querySelector(".video-button.button-next"),vidPrevBtn:document.querySelector(".video-button.button-prev"),vidBox:document.querySelector(".video-container")},doneReset:!1,unescapeHtml:function(e){var t=document.createElement("div");t.innerHTML=e;var i=t.childNodes[0].nodeValue;return t.removeChild(t.firstChild),i},emptyElement:function(e){e.innerHTML=""},displayVideo:function(e){console.log("displaying video using: ",e);var t=document.createElement("div");t.innerHTML=e.data.media_embed.content;var i=t.childNodes[0].nodeValue;this.els.vidBox.innerHTML=i,this.els.vidTitle.innerHTML=e.data.title},isAlertVisible:!1,alertUser:function(e){if(!this.isAlertVisible){var t=this;t.isAlertVisible=!0,t.els.alert.classList.add("alert-s-visible"),setTimeout(function(){t.els.alert.classList.remove("alert-s-visible"),t.isAlertVisible=!1},2600)}}}},{}],4:[function(e,t,i){t.exports={videos:[],lastFetched:!1,fetchVideos:function(e){var t="https://www.reddit.com/r/videos/.json?count=25";this.lastFetched&&(t+="&after="+this.lastFetched),console.log("Fetching, using this url: ",t);var i=new XMLHttpRequest,o=this;i.open("get",t,!0),i.onload=function(t){var n=JSON.parse(i.response).data.children;console.log("Fetching data, using this to set lastFetched: ",n[n.length-1]),o.lastFetched=n[n.length-1].data.name,e(n)},i.send()},addNewFreshVideo:function(e){this.videos.unshift(e)}}},{}],5:[function(e,t,i){t.exports={videos:[],init:function(){var e=localStorage.getItem("watchedVideos");null!==e&&(e=JSON.parse(e),this.videos=e.videos)},addNewWatchedVideo:function(e){this.videos.push(e),this.updateWatchedVideos()},updateWatchedVideos:function(){var e={videos:this.videos};localStorage.setItem("watchedVideos",JSON.stringify(e))},pruneOldVideos:function(){var e=[],t=Date.now()/1e3,i=604800;this.videos.forEach(function(o){t-o.time<i&&e.push(o)}),this.videos=e,this.updateWatchedVideos()},returnLastFetched:function(){return console.log("returnLastFetched: "+this.videos.slice(-1)[0]),this.videos.slice(-1)[0]},returnSimpleWatchedList:function(){return this.videos.map(function(e){return e.data.name})}}},{}]},{},[1]);